version: v1
plugins:
  - plugin: buf.build/protocolbuffers/go
    out: apps/daemon/gen
    opt: paths=source_relative
  - plugin: buf.build/connectrpc/go
    out: apps/daemon/gen
    opt: paths=source_relative
  # TS message types (protoc-gen-es)
  - plugin: buf.build/bufbuild/es
    out: packages/ts-bindings/src/gen
    opt:
      - target=ts
      - import_extension=none
  - plugin: buf.build/connectrpc/es
    out: packages/ts-bindings/src/gen
    opt:
      - target=ts
      - import_extension=none
  # Generate TS client code directly into the Tauri app for local imports
  - plugin: buf.build/bufbuild/es
    out: apps/desktop/src/gen
    opt:
      - target=ts
      - import_extension=none
  - plugin: buf.build/connectrpc/es
    out: apps/desktop/src/gen
    opt:
      - target=ts
      - import_extension=none
